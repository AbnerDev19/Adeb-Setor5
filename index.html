<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agenda ADEB Missão</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" type="image/png" href="fotos/logo1.png" />
</head>

<body>

    <div class="card-nav-container">
        <nav class="card-nav">
            <div class="card-nav-top">
                <div class="hamburger-menu" role="button" tabindex="0" aria-label="Toggle menu">
                    <div class="hamburger-line"></div>
                    <div class="hamburger-line"></div>
                </div>

                <div class="logo-container">
                    <img src="fotos/logo1.png" alt="ADEB Missão" class="logo">
                </div>

                <button type="button" class="card-nav-cta-button" id="btnLogin">
                    <i class="fas fa-user-shield"></i> <span id="loginText">Líder</span>
                </button>
            </div>

            <div class="card-nav-content">
                <div class="nav-card" style="background-color: #0f4c81; color: #fff;">
                    <div class="nav-card-label">Navegação</div>
                    <div class="nav-card-links">
                        <a href="index.html" class="nav-card-link">
                            <i class="fas fa-calendar-alt"></i> Calendário Geral
                        </a>
                        <a href="jovens-adolescentes.html" class="nav-card-link" id="linkJovens" style="display: none;">
                            <i class="fas fa-users"></i> Jovens e Adolescentes
                        </a>
                        <a href="escola-biblica.html" class="nav-card-link" id="linkEBD" style="display: none;">
                            <i class="fas fa-book-open"></i> Escola Bíblica
                        </a>
                    </div>
                </div>

                <div class="nav-card" style="background-color: #1e293b; color: #fff;">
                    <div class="nav-card-label">Atalhos</div>
                    <div class="nav-card-links">
                        <a href="#" class="nav-card-link"
                            onclick="document.querySelector('.filters-bar').scrollIntoView({behavior: 'smooth'})">
                            <i class="fas fa-filter"></i> Filtrar Eventos
                        </a>
                        <a href="#" class="nav-card-link">
                            <i class="fas fa-map-marker-alt"></i> Localizar Igrejas
                        </a>
                    </div>
                </div>
            </div>
        </nav>
    </div>

    <main class="main-content">
        <div class="header-title">
            <h1>Agenda 2026</h1>
            <p>Acompanhe os próximos cultos e eventos do ministério.</p>
        </div>

        <div class="filters-bar"
            style="background: white; padding: 20px; border-radius: 16px; display: flex; gap: 15px; box-shadow: var(--shadow-sm); flex-wrap: wrap;">
            <div style="display: flex; align-items: center; gap: 10px; color: var(--text-secondary); font-weight: 600;">
                <i class="fas fa-filter"></i>
                <span>Filtrar:</span>
            </div>
            <select id="filterDept" class="input-group" style="flex:1; margin:0;">
                <option value="">Todos os Departamentos</option>
                <option value="Jovens">Jovens</option>
                <option value="Adolescentes">Adolescentes</option>
                <option value="Varões">Varões</option>
                <option value="Irmãs">Irmãs</option>
                <option value="Crianças">Crianças</option>
                <option value="Geral">Geral / Família</option>
            </select>
            <select id="filterIgreja" class="input-group" style="flex:1; margin:0;">
                <option value="">Todas as Igrejas</option>
                <option value="Sede">Sede do Setor 05</option>
                <option value="GUARÁ II">GUARÁ II</option>
                <option value="GUARÁ I">GUARÁ I</option>
                <option value="LÚCIO COSTA">LÚCIO COSTA</option>
                <option value="VILA CAHUY">VILA CAHUY</option>
                <option value="VARGEM BONITA">VARGEM BONITA</option>
                <option value="QUADRA 13">QUADRA 13</option>
                <option value="VEREDA GRANDE">VEREDA GRANDE</option>
                <option value="CANDANGOLÂNDIA">CANDANGOLÂNDIA</option>
            </select>
            <button id="btnClearFilters" class="btn-clear" style="background: #fee2e2; color: #ef4444;">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <div class="dashboard-grid">
            <div class="card">
                <div class="calendar-header">
                    <button class="nav-arrow" id="prevMonth"><i class="fas fa-chevron-left"></i></button>
                    <h2 id="monthYear">Carregando...</h2>
                    <button class="nav-arrow" id="nextMonth"><i class="fas fa-chevron-right"></i></button>
                </div>
                <div class="weekdays"
                    style="display: grid; grid-template-columns: repeat(7, 1fr); text-align: center; font-weight: 600; color: var(--text-secondary); margin-bottom: 10px; font-size: 0.8rem;">
                    <div>D</div>
                    <div>S</div>
                    <div>T</div>
                    <div>Q</div>
                    <div>Q</div>
                    <div>S</div>
                    <div>S</div>
                </div>
                <div class="days-grid" id="daysContainer"></div>
            </div>

            <div class="card">
                <h3 class="card-title" style="color: var(--accent-color); margin-bottom: 20px;">Próximos Eventos</h3>
                <div id="eventsList" class="events-container"></div>
            </div>
        </div>

        <section id="admin-section"
            style="display: none; background: white; padding: 30px; border-radius: 16px; margin-top: 30px; box-shadow: var(--shadow-lg);">
            <div id="login-form-container">
                <div class="admin-header" style="text-align: center; margin-bottom: 20px;">
                    <h3><i class="fas fa-lock"></i> Acesso Restrito</h3>
                </div>
                <div class="admin-form"
                    style="max-width: 400px; margin: 0 auto; display: flex; flex-direction: column; gap: 15px;">
                    <div class="input-group">
                        <label>E-mail</label>
                        <input type="email" id="loginEmail" placeholder="admin@adeb.com">
                    </div>
                    <div class="input-group">
                        <label>Senha</label>
                        <input type="password" id="loginPass" placeholder="******">
                    </div>
                    <button class="btn-add" id="btnLoginPass"
                        style="background: var(--accent-color); color: white;">Entrar</button>
                    <p id="loginError" style="color: #ff3b30; font-size: 0.8rem; display: none; text-align: center;">
                    </p>

                    <div style="display: flex; align-items: center; gap: 10px; color: #cbd5e1; margin: 10px 0;">
                        <div style="flex: 1; height: 1px; background: #e2e8f0;"></div><span>OU</span>
                        <div style="flex: 1; height: 1px; background: #e2e8f0;"></div>
                    </div>

                    <button id="btnLoginGoogle" class="btn-add"
                        style="background: white; color: #333; border: 1px solid #e2e8f0;">
                        <img src="fotos/logo2.png" alt="G" style="width: 18px;"> Entrar com Google
                    </button>
                </div>
            </div>

            <div id="event-form-container" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h3><i class="fas fa-plus-circle"></i> Novo Evento</h3>
                    <div style="display: flex; gap: 10px; align-items: center;">
                        <span
                            style="font-size: 0.75rem; background: #dcfce7; color: #166534; padding: 4px 8px; border-radius: 12px;">Logado</span>
                        <button id="btnLogout"
                            style="background:none; border:none; color: #ef4444; cursor:pointer; font-weight: 600;">Sair</button>
                    </div>
                </div>

                <div class="admin-form dashboard-grid">
                    <div class="input-group">
                        <label>Departamento</label>
                        <select id="evtDept">
                            <option value="Geral">Geral / Família</option>
                            <option value="Jovens">Jovens</option>
                            <option value="Adolescentes">Adolescentes</option>
                            <option value="Varões">Varões</option>
                            <option value="Irmãs">Irmãs</option>
                            <option value="Crianças">Crianças</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label>Tipo</label>
                        <select id="tipoEvento">
                            <option value="local">Local</option>
                            <option value="setorial">Setorial</option>
                            <option value="geral">Geral</option>
                        </select>
                    </div>
                    <div class="input-group" id="divSelectIgreja">
                        <label>Igreja</label>
                        <select id="selectIgreja">
                            <option value="">Selecione...</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label>Título</label>
                        <input type="text" id="evtTitle" placeholder="Ex: Culto de Missões">
                    </div>
                    <div class="input-group">
                        <label>Data</label>
                        <input type="date" id="evtDate">
                    </div>
                    <div class="input-group">
                        <label>Detalhes (Horário/Local)</label>
                        <input type="text" id="evtLoc" placeholder="19h30 - Templo Principal">
                    </div>
                </div>
                <button class="btn-add" id="btnSaveEvent"
                    style="width: 100%; margin-top: 20px; background: var(--accent-color); color: white;">Salvar
                    Evento</button>
            </div>
        </section>
    </main>

    <script type="module" src="js/firebase-config.js"></script>
    <script type="module" src="js/app.js"></script>
    <script type="module" src="js/admin.js"></script>
    <script type="module" src="js/carga-dados.js"></script>
    <script type="module" src="js/script.js"></script>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const navContainer = document.querySelector('.card-nav');
            const hamburger = document.querySelector('.hamburger-menu');
            const content = document.querySelector('.card-nav-content');
            const cards = document.querySelectorAll('.nav-card');
            let isExpanded = false;

            // GSAP Timeline
            let tl = gsap.timeline({ paused: true });

            function updateTimeline() {
                const isMobile = window.matchMedia('(max-width: 768px)').matches;
                const baseHeight = 60;
                // Truque para calcular altura do conteudo oculto
                const prev = content.style.display;
                content.style.display = 'flex';
                content.style.visibility = 'hidden';
                const contentHeight = content.scrollHeight + 20; // Padding
                content.style.display = prev;
                content.style.visibility = '';

                tl.clear();
                tl.to(navContainer, {
                    height: baseHeight + contentHeight,
                    duration: 0.4,
                    ease: "power3.out"
                })
                    .set(content, { visibility: 'visible', opacity: 1 }, "<")
                    .fromTo(cards, { y: 20, opacity: 0 }, { y: 0, opacity: 1, duration: 0.3, stagger: 0.1 }, "-=0.2");
            }

            hamburger.addEventListener('click', () => {
                if (!isExpanded) {
                    updateTimeline();
                    tl.play();
                    hamburger.classList.add('open');
                } else {
                    tl.reverse();
                    hamburger.classList.remove('open');
                }
                isExpanded = !isExpanded;
            });

            // Lógica antiga de Select UI
            const selectTipo = document.getElementById('tipoEvento');
            const divIgreja = document.getElementById('divSelectIgreja');
            const selectIgreja = document.getElementById('selectIgreja');
            const inputLoc = document.getElementById('evtLoc');

            if (selectTipo) {
                selectTipo.addEventListener('change', () => {
                    if (selectTipo.value === 'geral') {
                        divIgreja.style.display = 'none';
                        inputLoc.placeholder = "Ex: Ginásio, Templo Sede...";
                    } else {
                        divIgreja.style.display = 'block';
                        inputLoc.placeholder = "Selecione a igreja acima...";
                    }
                });
            }
            if (selectIgreja) {
                selectIgreja.addEventListener('change', () => {
                    if (selectIgreja.value) inputLoc.value = `${selectIgreja.value} às 19h30`;
                });
            }
        });
    </script>
</body>

</html>