<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agenda ADEB Missão</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <style>
        /* Estilo para deixar os selects bonitos igual aos inputs */
        .input-group select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #e2e8f0;
            border-radius: 10px;
            outline: none;
            background-color: white;
            font-family: inherit;
            color: #1e293b;
        }
        .input-group select:focus {
            border-color: var(--accent-color);
        }
    </style>
</head>

<body>

    <button class="mobile-toggle" onclick="toggleSidebar()">
        <i class="fas fa-bars"></i>
    </button>

    <aside class="sidebar">
        <div class="logo-area">
            <img src="fotos/logo1.png" alt="Logo ADEB" class="sidebar-logo">
            <span>ADEB MISSÃO</span>
        </div>

        <nav class="nav-menu">
            <a href="#" class="nav-item active">
                <i class="fas fa-calendar-alt"></i> Calendário
            </a>
        </nav>

        <button class="login-btn" id="btnLogin">
            <i class="fas fa-user-shield"></i> <span id="loginText">Área do Líder</span>
        </button>
    </aside>

    <main class="main-content">
        <div class="header-title">
            <h1>Agenda 2026</h1>
            <p>Acompanhe os próximos cultos e eventos do ministério.</p>
        </div>

        <div class="dashboard-grid">
            <div class="card">
                <div class="calendar-header">
                    <button class="nav-arrow" id="prevMonth"><i class="fas fa-chevron-left"></i></button>
                    <h2 id="monthYear">Janeiro 2026</h2>
                    <button class="nav-arrow" id="nextMonth"><i class="fas fa-chevron-right"></i></button>
                </div>
                <div class="weekdays">
                    <div>D</div>
                    <div>S</div>
                    <div>T</div>
                    <div>Q</div>
                    <div>Q</div>
                    <div>S</div>
                    <div>S</div>
                </div>
                <div class="days-grid" id="daysContainer"></div>
            </div>

            <div class="card">
                <h3 class="card-title">Próximos Eventos</h3>
                <div id="eventsList" class="events-container"></div>
            </div>
        </div>

        <section id="admin-section">

            <div id="login-form-container">
                <div class="admin-header">
                    <h3><i class="fas fa-lock"></i> Acesso Restrito</h3>
                </div>

                <div class="admin-form">
                    <div class="input-group">
                        <label>E-mail</label>
                        <input type="email" id="loginEmail" placeholder="admin@adeb.com">
                    </div>
                    <div class="input-group">
                        <label>Senha</label>
                        <input type="password" id="loginPass" placeholder="******">
                    </div>
                    <button class="btn-add" id="btnLoginPass">Entrar</button>

                    <p id="loginError" style="color: #ff3b30; font-size: 0.8rem; display: none;"></p>

                    <div class="login-separator">
                        <div style="flex: 1; height: 1px; background: #e2e8f0;"></div>
                        <span>OU</span>
                        <div style="flex: 1; height: 1px; background: #e2e8f0;"></div>
                    </div>

                    <button id="btnLoginGoogle" class="btn-add btn-google">
                        <img src="fotos/logo2.png" alt="G">
                        Entrar com Google
                    </button>
                </div>
            </div>

            <div id="event-form-container" style="display: none;">
                <div class="admin-header">
                    <h3><i class="fas fa-plus-circle"></i> Adicionar Novo Evento</h3>
                    <div style="display: flex; gap: 10px; align-items: center;">
                        <span class="badge-admin" style="background: #dcfce7; color: #166534;">Logado</span>
                        <button id="btnLogout"
                            style="background:none; border:none; color: #ef4444; cursor:pointer; font-size: 0.85rem; font-weight: 600;">Sair</button>
                    </div>
                </div>

                <div class="admin-form">
                    
                    <div class="input-group">
                        <label for="tipoEvento">Tipo de Evento:</label>
                        <select id="tipoEvento"> 
                            <option value="local">Local (Igreja Local)</option>
                            <option value="setorial">Setorial (Setor 05)</option>
                            <option value="geral">Geral</option>
                            <option value="outra">Outra</option>
                        </select>
                    </div>

                    <div class="input-group" id="divSelectIgreja">
                        <label for="selectIgreja">Local (Igreja):</label>
                        <select id="selectIgreja">
                            <option value="">Selecione a Igreja...</option>
                            <option value="Sede do Setor 05">Sede do Setor 05 (Núcleo Bandeirante)</option>
                            <option value="GUARÁ II - QE 40">GUARÁ II - QE 40</option>
                            <option value="GUARÁ I - QE 11">GUARÁ I - QE 11</option>
                            <option value="LÚCIO COSTA">LÚCIO COSTA</option>
                            <option value="VILA CAHUY">VILA CAHUY</option>
                            <option value="VARGEM BONITA - PARK WAY">VARGEM BONITA - PARK WAY</option>
                            <option value="QUADRA 13 - PARK WAY">QUADRA 13 - PARK WAY</option>
                            <option value="VEREDA GRANDE">VEREDA GRANDE</option>
                            <option value="CANDANGOLÂNDIA - QD 05">CANDANGOLÂNDIA - QD 05</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label>Título do Evento</label>
                        <input type="text" id="evtTitle" placeholder="Ex: Santa Ceia">
                    </div>
                    
                    <div class="input-group">
                        <label>Data</label>
                        <input type="date" id="evtDate">
                    </div>
                    
                    <div class="input-group">
                        <label>Local / Horário (Final)</label>
                        <input type="text" id="evtLoc" placeholder="Digite o local e horário...">
                    </div>
                    
                    <button class="btn-add" id="btnSaveEvent">Salvar Evento</button>
                </div>
            </div>
        </section>
    </main>

    <script type="module" src="js/firebase-config.js"></script>
    <script type="module" src="js/app.js"></script>
    <script type="module" src="js/admin.js"></script>

    <script>
        const selectTipo = document.getElementById('tipoEvento');
        const divIgreja = document.getElementById('divSelectIgreja');
        const selectIgreja = document.getElementById('selectIgreja');
        const inputLoc = document.getElementById('evtLoc');

        // Função para mostrar/esconder o campo de igreja
        function verificarTipo() {
            const tipo = selectTipo.value;
            
            // Se for Geral ou Outra, esconde a lista de igrejas
            if (tipo === 'geral' || tipo === 'outra') {
                divIgreja.style.display = 'none';
                selectIgreja.value = ""; // Limpa a seleção
                if(tipo === 'geral') inputLoc.placeholder = "Ex: Ginásio, Templo Sede Geral, etc...";
            } else {
                // Se for Local ou Setorial, mostra a lista
                divIgreja.style.display = 'block';
                inputLoc.placeholder = "Selecione a igreja acima ou digite...";
            }
        }

        // 1. Escuta mudanças no TIPO
        if(selectTipo) {
            selectTipo.addEventListener('change', verificarTipo);
            verificarTipo(); // Roda ao carregar para garantir o estado certo
        }

        // 2. Escuta mudanças na IGREJA (Preenche o texto automaticamente)
        if(selectIgreja && inputLoc) {
            selectIgreja.addEventListener('change', () => {
                const igrejaSelecionada = selectIgreja.value;
                if(igrejaSelecionada) {
                    inputLoc.value = `${igrejaSelecionada} às 19h30`;
                }
            });
        }
    </script>
</body>

</html>